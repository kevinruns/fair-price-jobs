{# Data Table Component - Reusable table with consistent styling #}
{% macro data_table(id, headers, data, empty_message, table_class="table table-striped") %}
<div class="table-responsive">
    <table class="{{ table_class }}" id="{{ id }}">
        <thead>
            <tr>
                {% for header in headers %}
                <th class="sortable-header" 
                    data-column="{{ header.column }}" 
                    data-type="{{ header.type }}"
                    {% if header.numeric %}class="numeric"{% endif %}>
                    {{ header.label }}
                </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% if data %}
                {% block table_body %}{% endblock %}
            {% else %}
                {{ empty_state(empty_message) }}
            {% endif %}
        </tbody>
    </table>
</div>
{% endmacro %}

{# Tradesmen Table Body #}
{% macro tradesmen_table_body(tradesmen) %}
{% for tradesman in tradesmen %}
<tr class="clickable" data-tradesman-id="{{ tradesman.id }}">
    <td data-column="avatar" class="text-center">
        <div class="avatar-circle">
            <i class="fas fa-user-tie text-muted"></i>
        </div>
    </td>
    <td data-column="name">
        <a href="{{ url_for('tradesmen.view_tradesman', tradesman_id=tradesman.id) }}" 
           class="text-decoration-none">
            <span class="fw-semibold text-primary">
                {{ tradesman.first_name }} {{ tradesman.family_name }}
            </span>
        </a>
    </td>
    <td data-column="company">{{ tradesman.company_name or _("N/A") }}</td>
    <td data-column="trade">{{ tradesman.trade }}</td>
    <td data-column="rating">{{ rating_badge(tradesman.rating) }}</td>
    <td data-column="jobs" class="text-center">
        <span class="badge bg-success">{{ tradesman.job_count }}</span>
    </td>
    <td data-column="quotes" class="text-center">
        <span class="badge bg-warning">{{ tradesman.quote_count }}</span>
    </td>
    <td data-column="added_by">
        <a href="{{ url_for('profile.user_profile', user_id=tradesman.added_by_user_id) }}" 
           class="text-decoration-none">
            <span class="text-info">{{ tradesman.added_by_username }}</span>
        </a>
    </td>
</tr>
{% endfor %}
{% endmacro %}

{# Jobs Table Body #}
{% macro jobs_table_body(recent_jobs) %}
{% for job in recent_jobs %}
{% set job_url = url_for('jobs.view_job', job_id=job.id) if job.type == 'job' else url_for('jobs.view_quote', quote_id=job.id) %}
{% set cost_field = job.total_cost if job.type == 'job' else job.total_quote %}
<tr class="clickable" data-job-id="{{ job.id }}">
    <td data-column="icon" class="text-center">
        <div class="icon-circle" 
             title="{% if job.type == 'job' %}{{ _('Completed Job') }}{% else %}{{ _('Quote') }}{% endif %}">
            <i class="fas fa-{% if job.type == 'job' %}hammer{% else %}file-invoice{% endif %} text-muted"></i>
        </div>
    </td>
    <td data-column="title">
        <a href="{{ job_url }}" class="text-decoration-none">
            <span class="fw-semibold text-primary">{{ job.title }}</span>
        </a>
    </td>
    <td data-column="tradesman">
        <a href="{{ url_for('tradesmen.view_tradesman', tradesman_id=job.tradesman_id) }}" 
           class="text-decoration-none">
            {{ display_name(job.first_name, job.family_name, job.company_name) }}
        </a>
    </td>
    <td data-column="trade">{{ job.trade }}</td>
    <td data-column="date">
        {% if job.type == 'job' %}
            {{ date_display(job.date_finished) }}
        {% else %}
            {{ date_display(job.date_received, label="Date received") }}
        {% endif %}
    </td>
    <td data-column="cost" class="numeric">â‚¬{{ cost_field }}</td>
    <td data-column="rating">{{ rating_badge(job.rating) }}</td>
    <td data-column="added_by">
        <a href="{{ url_for('profile.user_profile', user_id=job.added_by_user_id) }}" 
           class="text-decoration-none">
            <span class="text-info">{{ job.added_by_username }}</span>
        </a>
    </td>
</tr>
{% endfor %}
{% endmacro %}

{# Groups Table Body #}
{% macro groups_table_body(my_groups) %}
{% for group in my_groups %}
<tr class="clickable" data-group-id="{{ group.id }}">
    <td data-column="icon" class="text-center">
        <div class="icon-circle" title="{{ _('Group') }}">
            <i class="fas fa-users text-muted"></i>
        </div>
    </td>
    <td data-column="name">
        <a href="{{ url_for('groups.view_group', group_id=group.id) }}" 
           class="text-decoration-none">
            <span class="fw-semibold text-primary">{{ group.name }}</span>
        </a>
    </td>
    <td data-column="postcode">{{ group.postcode }}</td>
    <td data-column="members" class="text-center">
        <span class="badge bg-info">{{ group.member_count }}</span>
    </td>
    <td data-column="status">{{ status_badge(group.status) }}</td>
</tr>
{% endfor %}
{% endmacro %}
