{# Rating badge macro with flexible display options #}}
{% macro rating_badge(rating, show_none=true, none_text="None") %}
    {% if rating %}
        <span class="badge bg-{% if rating >= 4 %}success{% elif rating >= 3 %}warning{% else %}danger{% endif %}">
            {{ "%.1f"|format(rating) if rating is number else rating }}/5
        </span>
    {% elif show_none %}
        <span class="badge bg-light text-muted">
            <i class="fas fa-star rating-icon"></i>No Rating
        </span>
    {% endif %}
{% endmacro %}

{# Note: section_header macro has been moved to components/section_header.html for better organization #}

{# Display name with company fallback #}}
{% macro display_name(first_name, family_name, company_name) %}
    {% if company_name %}
        {{ company_name }}
    {% else %}
        {{ first_name }} {{ family_name }}
    {% endif %}
{% endmacro %}

{# Empty state with customizable message #}}
{% macro empty_state(message) %}
    <div class="text-center py-5">
        <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
        <p class="text-muted">{{ message }}</p>
    </div>
{% endmacro %}

{# Status badge with color coding #}}
{% macro status_badge(status) %}
    {% set status_colors = {
        'completed': 'success',
        'in_progress': 'warning', 
        'pending': 'info',
        'cancelled': 'danger'
    } %}
    <span class="badge bg-{{ status_colors.get(status, 'secondary' ) }}">
        {{ status.replace('_', ' ').title() }}</span>
{% endmacro %}

{# Job type badge #}}
{% macro job_type_badge(job_type) %}
    {% set type_colors = {
        'job': 'success',
        'quote': 'warning'
    } %}
    <span class="badge bg-{{ type_colors.get(job_type, 'secondary' ) }}" style="min-width: 60px; width: 60px;">
        {{ job_type.title() }}</span>
{% endmacro %}

{# Date display with formatting #}}
{% macro date_display(date, format="%d/%m/%Y", label="") %}
    {% if date %}
        {% if date is string %}
            <span class="date-cell" data-date="{{ date }}" data-label="{{ label }}">{{ date }}</span>
        {% else %}
            <span class="date-cell" data-date="{{ date.isoformat() }}" data-label="{{ label }}">{{ date.strftime(format) }}</span>
        {% endif %}
    {% else %}
        <span class="date-cell" data-date="" data-label="{{ label }}">Date pending</span>
    {% endif %}
{% endmacro %}

{# Form field macro for single input fields #}}
{% macro form_field(label, field_id, field_name, value="", field_type="text", placeholder="", required=false, rows=1, step="", min="", max="") %}
    <div class="row align-items-center mb-4">
        <label for="{{ field_id }}" class="col-sm-2 col-form-label fw-bold">{{ label }}</label>
        <div class="col-sm-10">
            <div class="input-container">
                {% if field_type == "textarea" %}
                    <textarea 
                        class="form-control" 
                        id="{{ field_id }}" 
                        name="{{ field_name }}" 
                        placeholder="{{ placeholder }}"
                        {% if required %}required{% endif %}
                        rows="{{ rows }}"
                    >{{ value }}</textarea>
                {% elif field_type == "file" %}
                    <input 
                        type="file" 
                        class="form-control" 
                        id="{{ field_id }}" 
                        name="{{ field_name }}"
                        {% if required %}required{% endif %}
                    >
                {% else %}
                    <input 
                        type="{{ field_type }}" 
                        class="form-control" 
                        id="{{ field_id }}" 
                        name="{{ field_name }}" 
                        value="{{ value }}"
                        placeholder="{{ placeholder }}"
                        {% if required %}required{% endif %}
                        {% if step %}step="{{ step }}"{% endif %}
                        {% if min %}min="{{ min }}"{% endif %}
                        {% if max %}max="{{ max }}"{% endif %}
                    >
                {% endif %}
            </div>
        </div>
    </div>
{% endmacro %}

{# Form field pair macro for side-by-side fields #}}
{% macro form_field_pair(
    label1, field_id1, field_name1,
    label2, field_id2, field_name2,
    value1="", field_type1="text", placeholder1="", required1=false, step1="", min1="", max1="",
    value2="", field_type2="text", placeholder2="", required2=false, step2="", min2="", max2=""
) %}
    <div class="row align-items-center mb-4">
        <div class="col-sm-6">
            <div class="row align-items-center">
                <label for="{{ field_id1 }}" class="col-sm-4 col-form-label fw-bold">{{ label1 }}</label>
                <div class="col-sm-8">
                    <div class="input-container">
                        <input 
                            type="{{ field_type1 }}" 
                            class="form-control" 
                            id="{{ field_id1 }}" 
                            name="{{ field_name1 }}" 
                            value="{{ value1 }}"
                            placeholder="{{ placeholder1 }}"
                            {% if required1 %}required{% endif %}
                            {% if step1 %}step="{{ step1 }}"{% endif %}
                            {% if min1 %}min="{{ min1 }}"{% endif %}
                            {% if max1 %}max="{{ max1 }}"{% endif %}
                        >
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="row align-items-center">
                <label for="{{ field_id2 }}" class="col-sm-4 col-form-label fw-bold">{{ label2 }}</label>
                <div class="col-sm-8">
                    <div class="input-container">
                        <input 
                            type="{{ field_type2 }}" 
                            class="form-control" 
                            id="{{ field_id2 }}" 
                            name="{{ field_name2 }}" 
                            value="{{ value2 }}"
                            placeholder="{{ placeholder2 }}"
                            {% if required2 %}required{% endif %}
                            {% if step2 %}step="{{ step2 }}"{% endif %}
                            {% if min2 %}min="{{ min2 }}"{% endif %}
                            {% if max2 %}max="{{ max2 }}"{% endif %}
                        >
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endmacro %} 